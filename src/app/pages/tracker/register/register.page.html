<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start"> 
      <ion-menu-button></ion-menu-button> 
    </ion-buttons> 
    <ion-title>Register your tracker</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card *ngIf="user$ | async as user">
    <ion-item>
      <ion-icon name="pin" slot="start"></ion-icon>
      <ion-label>Your tracker</ion-label>
    </ion-item>
    <ion-card-content>
      Your profile has a tracker registered with {{ user.providerId }} with user {{ user.providerUserId }}
    </ion-card-content>
    <ion-item>
      <ion-icon name="key" slot="start"></ion-icon>
      <ion-label>{{ user.subscription | json }}</ion-label>
      <ion-button 
            *ngIf="token" 
            color="danger" 
            size="small"
            (click)="removeSubscription(token, user.providerId, user.providerUserId)">
          <ion-icon slot="start" name="trash"></ion-icon>
          Remove
      </ion-button>
    </ion-item>
  </ion-card>

  <ion-button (click)="linkWithFitbit()">Link a Fitbit</ion-button>

</ion-content>
